{% load static %}
<style>
.navbar .nav-link,
.navbar .navbar-brand {
    text-transform: none !important;
    font-size: 1.3rem !important;
}
.navbar .navbar-toggler {
    border-color: transparent !important;
}
.navbar .navbar-toggler-icon {
    background-image: url("data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba(54,81,231, 1)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");
}
.logo {
    height: 80px;
    width: auto;
} 
</style>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-warning bg-warning sticky-top">
    <div class="container">
    <a class="navbar-brand" href={% url "pages:home" %}>
        <img src="{% static 'img/CRAN.png' %}" class="logo" alt="" />
    </a>
    <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNavAltMarkup"
    >
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <ul class="navbar-nav">
        <li if {% if "/" == request.path %}
                class="nav-item active mr-3"
            {% else %}
                li class="nav-item mr-3"
            {% endif %}
        >
            <a class="nav-link" href={% url "pages:home" %}>Home</a>
        </li>
        <li if {% if "about" in request.path %}
                class="nav-item active mr-3"
            {% else %}
                li class="nav-item mr-3"
            {% endif %}
        >
            <a class="nav-link" href={% url "pages:about" %}>About</a>
        </li>
        <li if {% if "products" in request.path %}
                li class="nav-item active mr-3"
            {% else %}
                li class="nav-item mr-3"
            {% endif %}
        >
            <a class="nav-link" href="{% url 'products:products' %}">Products</a>
        </li>
        </ul>

        <ul class="navbar-nav ml-auto">
        <li {% if 'search' in request.path %} class="nav-item mr-3 active" {% else %} class="nav-item mr-3" {% endif %}>
            <a class="nav-link" href="#" data-toggle="modal" data-target="#searchModal">
                <i class="fas fa-search"></i> Search
            </a>
        </li>
        {% if user.is_authenticated %}
            <li  {% if 'dashboard' in request.path %} class="nav-item mr-3 active" {% else %} class="nav-item mr-3" {% endif %}>
                <a class="nav-link" href={% url "accounts:dashboard" %}>
                    <i class="fas fa-user-alt"></i> {{user.username}}
                </a>
            </li>
            <!--logout-->
            <li class="nav-item mr-3">
                <a class="nav-link" href="javascript:{document.getElementById('logout').submit()}" class="nav-link">
                <i class="fas fa-sign-out-alt"></i> Logout
                </a>
                <form action="{% url 'accounts:logout' %}" method="POST" id="logout">
                    {% csrf_token %}
                    <input type="hidden" />
                </form>
            </li>
            <li {% if 'products' in request.path %} class="nav-item mr-3 active" {% else %} class="nav-item mr-3" {% endif %}>
                <a class="nav-link" href={% url "accounts:dashboard" %}> 
                    <i class="fas fa-shopping-cart"></i> Cart (6)
                </a>
            </li>
        {% else %}
            <li  {% if 'register' in request.path %} class="nav-item mr-3 active" {% else %} class="nav-item mr-3" {% endif %}>
                <a class="nav-link" href={% url "accounts:register" %}>
                <i class="fas fa-user-plus"></i> Register</a>
            </li>
            <li  {% if 'login' in request.path %} class="nav-item mr-3 active" {% else %} class="nav-item mr-3" {% endif %}>
                <a class="nav-link" href={% url "accounts:login" %}>
                <i class="fas fa-sign-in-alt"></i> Login</a>
            </li>
        {% endif %}
        </ul>
    </div>
    </div>
</nav>

<!-- Search Modal -->
<div class="modal fade" id="searchModal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="searchModalLabel">Search</h5>
                <button type="button" class="close" data-dismiss="modal">
                <span>&times;</span>
                </button>
            </div>
            <div class="modal-body">
            <form action="{% url 'products:search' %}">
                <div class="form-group">
                    <div class="col-md-12 mb-3">
                        <label class="sr-only">Category</label>
                        <input
                        type="text"
                        name="keywords"
                        class="form-control"
                        placeholder="Keyword (Name, Brand, Description, etc)"
                        value="{{values.keywords}}"
                        />
                    </div>
                <div class="col-md-12 mb-3">
                    <label class="sr-only">Category</label>
                    <select name="category" class="form-control">
                    <option {% if not values.category %} selected {% endif %} value=''> 
                        Category (All)
                    </option>
                    {% for category in categories %}
                    <option value="{{category.name}}" {% if category.name == values.category %} selected {% endif %}>{{ category.name }}</option>
                    {% endfor %}
                    </select>
                </div>
                <div class="col-md-12 mb-3">
                    <label class="sr-only">Brand</label>
                    <select name="brand" class="form-control">
                    <option {% if not values.brand %} selected {% endif %} value=''>Brand (All)
                    </option>
                    {% for key, value in brand_choices.items %}
                    <option value="{{key}}" {% if key == values.brand %} selected {% endif %} > {{value}}</option>
                    {% endfor %}
                    </select>
                </div>
                <div class="col-md-12 mb-3">
                    <label class="sr-only">Tag</label>
                    <select name="tag" class="form-control" id="type">
                    <option {% if not values.tag %} selected {% endif %} value=''>
                        Tag (All)
                    </option>
                    {% for key,value in tag_choices.items %}
                    <option value="{{key}}" {% if key == values.tag %} selected {% endif %} >{{value}}</option>
                    {% endfor %}  
                    </select>
                </div>
            </div>
            <hr />
            <input
            type="submit"
            value="Send"
            class="btn btn-block btn-secondary"
            />
        </form>
        </div>
    </div>
    </div>
</div>