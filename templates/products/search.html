{% extends 'base.html' %} {% block content %} {% load static %} 


<section id="showcase-inner" class="showcase-search text-white py-5">
    <div class="container">
    <div class="row text-center">
        <div class="col-md-12">          
        <form action="{% url 'products:search' %}">
            <!-- Form Row 1 -->
            <div class="form-row">
            <!---district -->
            <div class="col-md-12 mb-3">
                <label class="sr-only">Category</label>
                <input
                type="text"
                name="keywords"
                class="form-control"
                placeholder="Keyword (Name, Brand, Description, etc)"
                value="{{values.keywords}}"
                />
            </div>
            </div>
            <!-- Form Row 2 -->
            <div class="form-row">
            <div class="col-md-4 mb-3">
                <label class="sr-only">Category</label>
                <select name="category" class="form-control">
                <option {% if not values.category %} selected {% endif %} value=''> 
                    Category (All)
                </option>
                {% for category in categories %}
                <option value="{{category.name}}" {% if category.name == values.category %} selected {% endif %}>{{ category.name }}</option>
                {% endfor %}

                </select>
            </div>
            <div class="col-md-4 mb-3">
                <label class="sr-only">Brand</label>
                <select name="brand" class="form-control">
                <option {% if not values.brand %} selected {% endif %} value=''>Brand (All)
                </option>
                {% for key, value in brand_choices.items %}
                <option value="{{key}}" {% if key == values.brand %} selected {% endif %} > {{value}}</option>
                {% endfor %}
                
                </select>
            </div>
            <div class="col-md-4 mb-3">
                <label class="sr-only">Tag</label>
                <select name="tag" class="form-control" id="type">
                <option {% if not values.tag %} selected {% endif %} value=''>
                    Tag (All)
                </option>
                {% for key,value in tag_choices.items %}
                <option value="{{key}}" {% if key == values.tag %} selected {% endif %} >{{value}}</option>
                {% endfor %}  
                
                </select>
            </div>
            </div>
            <button class="btn btn-secondary btn-block mt-4" type="submit">
            Submit form
            </button>
        </form>
        </div>
    </div>
    </div>
</section>

<!-- Breadcrumb -->
<section id="bc" class="mt-3">
    <div class="container">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
        <li class="breadcrumb-item">  
            <a href={% url 'pages:index' %}> <i class="fas fa-home"></i> Home</a>
        </li>
        <li class="breadcrumb-item">
            
            <a href={% url 'products:products' %}>Browse Products</a>
        </li>
        <li class="breadcrumb-item active">Search Results</li>
        </ol>
    </nav>
    </div>
</section>

<!-- Listings -->
<section id="products" class="py-4">
    <div class="container">
    <div class="row">
        <!-- Listing 1 -->
        
        {% if products %} 
        {% for product in products %} 
        <div class="col-md-6 col-lg-4 mb-4">
        <div class="card listing-preview">
            {% if product.product_img %}
            <img
                class="card-img-top"
                src="{{ product.product_img.url }}"
                alt="{{ product.name }}"
            />
            {% else %}
            <img
                class="card-img-top"
                src="{% static 'photos/default.jpg' %}"
                alt="Default image"
            />
            {% endif %}




            <div class="card-img-overlay">
            </div>
            <div class="card-body">
            <div class="product-heading text-center">
                <h4 class="text-primary">{{product.name}}</h4>
                <p>
                <i class="fas fa-map-marker text-secondary"></i> {{product.category | title}} 
                </p>
            </div>
            <hr />
            <div class="row py-2 text-secondary">
                <div class="col-6">
                    <i class="fas fa-th-large"></i> Description {{product.description}}
                </div>
                <div class="col-6">
                <i class="fas fa-dumbbell"></i> Brand {{product.brand}} 
                </div>
            </div>
            <div class="row py-2 text-secondary">
                <div class="col-6">
                <i class="fas fa-bed"></i> Prices {{product.price}}
                </div>
                <div class="col-6">
                <i class="fas fa-bath"></i> Tag {{product.tag}}
                </div>
            </div>
            <hr />
            <div class="row py-2 text-secondary">
                <div class="col-12">
                <i class="fas fa-user"></i> {{product.category.name}}
                </div>
            </div>
            <div class="row text-secondary pb-2">
                <div class="col-12">
                <i class="fas fa-clock"></i> Reservation required
                </div>
            </div>
            <hr />
            
            <a href={% url "products:product" product.id %} class="btn btn-primary btn-block"
                >More Info</a
            >
            </div>
        </div>
        </div>
        {% endfor %}
        {% else %}
        <div class="col-md-12">
            <p>No Products Available</p>
        </div>
        {% endif %}

    
    </div>

    <div class="row">
        <div class="col-md-12">
        {% if products.has_other_pages %} 
        
        <ul class="pagination">
            {% if products.has_previous %}
            <li class="page-item">
            <a class="page-link" href="?page={{products.previous_page_number}}&keywords={{values.keywords}}&category={{values.category}}&brand={{values.brand}}&price={{values.price}}">&laquo;</a> 
            
            </li>   
            {% else %}
            <li class="page-item disabled">
            <a class="page-link" href="#">&laquo;</a>
            </li>
            {% endif %}
            {% for i in products.paginator.page_range %}
            {% if products.number == i %}
            <li class="page-item active">
            <a class="page-link">{{i}}</a>
            </li>
            {% else %}
            <li class="page-item">
            <a class="page-link" href="?page={{i}}&keywords={{values.keywords}}&category={{values.category}}&brand={{values.brand}}&price={{values.price}}">{{i}}</a>
            </li>  
            {% endif %}
            {% endfor %}
            
            {% if products.has_next %}
            <li class="page-item">
            <a class="page-link" href="?page={{products.next_page_number}}&keywords={{values.keywords}}&category={{values.category}}&brand={{values.brand}}&price={{values.price}}">&raquo;</a>
            </li>
            {% else %}
            <li class="page-item disabled">
            <a class="page-link" href="#">&raquo;</a>
        </li>
        {% endif %}
        </ul>
        {% endif%} 
        </div>
    </div>
    </div>
</section>

{% endblock %}